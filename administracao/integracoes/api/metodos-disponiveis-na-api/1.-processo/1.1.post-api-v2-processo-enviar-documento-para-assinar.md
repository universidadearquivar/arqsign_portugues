---
description: >-
  O objetivo do método é permitir aos Clientes, via API, enviar processos com um
  ou mais documentos para assinar.
---

# ✔️ 1.1.POST/api/v2/processo/enviar-documento-para-assinar

Diferente da aplicação ArqSign, que permite agrupar os arquivos do processo, neste serviço quando enviado o processo com mais de um documento, o serviço considera como **uma coleção de arquivos e estes não serão agrupados em um único arquivo**. Ou seja, não é possível agrupar arquivos pelo serviço de envio de processo de documentos para assinar.&#x20;

O usuário deve informar os dados do processo e dos destinatários participantes do processo de assinatura.

## Autenticações e permissões

1. Para autenticar na API da ArqSign, o usuário deve informar a AppKey, válida, da conta que está enviando os documentos para assinaturas.
2. Somente conta com **status Ativo** e com **permissão de Integração ArqSign** pode enviar processos via integração ArqSign.
3. A conta deve possuir créditos de Envios, SMS e/ou WhatsApp, conforme necessidade.
4.  Caso a conta não possua crédito, o sistema retorna a mensagem:

    "Saldo de créditos de Envios ou WhatsApp ou SMS insuficiente"

## Requisição

**Orientações:**

Quando campo requerido estiver como “Sim” = Sempre requerido

Quando campo requerido estiver como “Não” = Informação Opcional

Quando campo requerido estiver como “Talvez” = Em alguns casos ele será requerido. Para saber estes casos, consultar a descrição do tópico, conforme o número de referência da linha na tabela.

<figure><img src="../../../../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

### **Exemplo de Body Request**

```
{
    "idResponsavel": "guid",
    "nomeProcesso": "varchar(250)",
    "idPasta": "guid",
    "configuracoesAvancadas": {
        "tempoExpiracaoDocumentoDias": "smallint",
        "avisoAntesExpiracaoDocumentoDias": "smallint",
        "frequenciaLembretesDias": "smallint",
        "gerarQrCode": "bit",
        "obrigarLeitura": "bit"
    },
    "renovacaoMeses": "tinyint",
    "mensagemPadrao": {
        "titulo": "nvarchar(150)",
        "texto": "nvarchar(max)"
    },
    "usarOrdemAssinatura": "bit",
    "usarPosicaoAssinaturaAutomatica": "bit",
    "destinatarios": [
        {
            "idTipoAcao": "tinyint",
            "ordemAssinatura": "tinyint",
            "representacaoVisualAssinatura": "tinyint",
            "nome": "varchar(150)",
            "email": "varchar(150)",
            "telefone": "varchar(20)",
            "assinarOnline": {
                "assinarComo": "tinyint",
                "papelPessoaFisica": [
                    "varchar(50)",
                    "varchar(50)",
                    "varchar(50)"
                ],
                "papelPessoaJuridica": [
                    "varchar(50)"
                ],
                "seguranca": {
                    "codigoSeguranca": "char(4)",
                    "idMeioEnvio": "tinyint",
                    "codigoSegurancaEmail": "varchar(150)",
                    "codigoSegurancaTelefone": "varchar(20)",
                    "reenviarCodigo": "bit"
                },
                "mensagemPersonalizada": {
                    "titulo": "nVarChar(150)",
                    "texto": "nVarChar(max)"
                },
                "anexos": [
                    {
                        "anexoDocumentoNome": "VarChar(75)",
                        "anexoObrigatorio": "bit",
                        "anexoExibirTodosDestinatarios": "bit"
                    }
                ],
                "definirPosicaoAssinaturaManual": [
                    {
                        "documentoDeOrdem": "tinyint",
                        "pessoaFisica": {
                            "pagina": "int",
                            "altura": "decimal",
                            "largura": "decimal",
                            "posicaoX": "decimal",
                            "posicaoY": "decimal"
                        },
                        "pessoaJuridica": {
                            "pagina": "int",
                            "altura": "decimal",
                            "largura": "decimal",
                            "posicaoX": "decimal",
                            "posicaoY": "decimal"
                        }
                    }
                ],
                "idTipoAssinatura": "tinyint",
                "assinaturaEletronica": {
                    "obrigarSignatarioInformarNome": "bit",
                    "obrigarSignatarioInformarNumeroDocumento": "bit",
                    "tipoDocumentoAInformar": "tinyint",
                    "configuracaoDocumentoOutro": {
                        "nomeDocumento": "VarChar(50)",
                        "formatoDadosDocumento": "tinyint",
                        "qtdeCaracteresDocumento": "tinyint"
                    },
                    "obrigarSignatarioInformarNomeEmpresa": "bit",
                    "obrigarSignatarioInformarNumeroDocumentoEmpresa": "bit",
                    "tipoDocumentoEmpresaAInformar": "tinyint",
                    "configuracaoDocumentoEmpresaOutro": {
                        "nomeDocumento": "VarChar(50)",
                        "formatoDadosDocumento": "tinyint",
                        "qtdeCaracteresDocumento": "tinyint"
                    }
                },
                "dadosAssinatura": {
                    "signatario": {
                        "nome": "string",
                        "numeroDocumento": "string",
                        "validarDocumento": "bit"
                    },
                    "empresa": {
                        "nome": "string",
                        "numeroDocumento": "string",
                        "validarDocumento": "bit"
                    },
                    "dadosComplementares": [
                        {
                            "label": "string",
                            "valor": "string"
                        }
                    ]
                }
            }
        }
    ],
    "documentos": [ //somente pdf
        {
            "ordemDocumento": "tinyint",
            "nomeComExtensao": "varchar(150)",
            "arquivo": "String Base64"
        }
    ]
}
```

## Validações

### Validações específicas

**idResponsavel**

> **Descrição**: Parâmetro obrigatório informando o Id do responsável do processo. Esta informação será considerada como o responsável pelo cadastro e pelo processo, ou seja, “remetente” do processo. Desta forma, se o usuário informado autenticar na aplicação ele visualizará todos os documentos no menu “Enviados”.
>
> **Formato**: Guid
>
> **Requerido**: <mark style="color:red;">**Sim**</mark>
>
> &#x20;<mark style="color:orange;">**Validação**</mark><mark style="color:orange;">:</mark>
>
> a- O sistema valida se o id do usuário informando no parâmetro **idResponsavel** pertence a conta, em questão, permitindo usuário com status ativo, inativo ou bloqueado.

**nomeProcesso**

> **Descrição:** Parâmetro obrigatório informando o Nome do processo.
>
> **Formato:** Varchar(250)
>
> **Requerido:&#x20;**<mark style="color:red;">**Sim**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- O sistema valida a obrigatoriedade e tamanho da String.

&#x20;**idPasta**

> **Descrição:** Parâmetro obrigatório informando Id da pasta do processo.
>
> **Formato:** Guid
>
> **Requerido:&#x20;**<mark style="color:red;">**Sim**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- O sistema verifica se o **idPasta** pertence a conta da AppKey informada.\
> idPasta não encontrado.

#### **configuracoesAvancada**

Configurações avançadas para o processo em relação a tempo de expiração, aviso de expiração, frequência deste aviso, geração do QRCode e obrigar a leitura da coleção de arquivos do processo.

Esta parte do JSON não é obrigatória, desta forma se não for enviada ou enviada como nula, o sistema salva o processo com as configurações da conta em questão.

> #### **tempoExpiracaoDocumentoDias**
>
> **Descrição:** Parâmetro opcional informando o tempo em que o processo ficará disponível para assinatura, até que todos os signatários assinem e o processo seja concluído.
>
> **Formato:** Smallint, valores entre {1} e {999}
>
> **Requerido:&#x20;**<mark style="color:blue;">**Não**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Quando a informação não é enviada ou enviada como nula ou 0, o sistema considera as configurações da conta.

> #### **avisoAntesExpiracaoDocumentoDias**
>
> **Descrição:** Parâmetro opcional informando o tempo para a aplicação iniciar o aviso antes que o documento expire.
>
> **Formato:** Smallint, valores entre {1} e {99}
>
> **Requerido:&#x20;**<mark style="color:blue;">**Não**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Quando a informação não é enviada ou enviada como nula ou 0, considera as configurações da conta.

> #### **frequenciaLembretesDias:**
>
> **Descrição:** Parâmetro opcional informando o tempo para avisos de assinatura.
>
> **Formato:** Smallint, valores entre {1} e {999}
>
> **Requerido:&#x20;**<mark style="color:blue;">**Não**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Quando a informação **não é enviada ou enviada como nula**, o sistema considera as configurações da conta.

> #### **gerarQrCode**
>
> **Descrição:** Parâmetro opcional informando se o QrCode deve ser gerado ou não no momento da conclusão do processo.
>
> **Formato:** Bit, 1 = true ou 0 = false
>
> **Requerido:&#x20;**<mark style="color:blue;">**Não**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Se o parâmetro **gerarQrCode** não for enviado, o sistema  considera as configurações de geração de qrCode na conta.
>
> Quando para o processo em questão estiver sendo enviado uma coleção de arquivos (mais de um arquivo) para assinatura, o QrCode é gerado por arquivo. Cada arquivo terá seu QrCode e sua página de assinatura.

> #### **obrigarLeitura**
>
> **Descrição:** Parâmetro opcional informando a obrigatoriedade de leitura dos documentos ao assinar.
>
> Quando o processo em questão possuir mais de um arquivo a assinar, esta informação será usada para obrigar ou não o signatário a clicar em cada arquivo antes do botão “Assinar” ser habilitado.
>
> Caso o processo em questão possua somente um arquivo a assinar, esta informação não irá gerar nenhum impacto no processo de assinatura.
>
> **Formato:** Bit, 1 = true ou 0 = false
>
> **Requerido:&#x20;**<mark style="color:blue;">**Não**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Quando a informação **não é enviada ou enviada como nula**, o sistema considera as **configurações da conta**.

#### renovacaoMeses

> **Descrição:** Parâmetro opcional informando o tempo para definir quando o processo em questão precisa ser renovado.
>
> **Formato:** Tinyint
>
> **Requerido:&#x20;**<mark style="color:blue;">**Não**</mark>

#### mensagemPadrao

Mensagem padrão que será enviada para todos os destinatários definidos como signatários do processo.

> **titulo**
>
> **Descrição:** Título da mensagem a ser enviada para os signatários.
>
> **Formato:** Varchar(150)
>
> **Requerido:** <mark style="color:blue;">**Não**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Se o título não for enviado, o sistema salva o valor default conforme abaixo:
>
> Título = ArqSign: \[Nome do documento informado no paramento "nome"]

> **texto**
>
> **Descrição:** Texto da mensagem a ser enviada para os signatários.
>
> **Formato:** Varchar(max)
>
> **Requerido**: <mark style="color:blue;">**Não**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Se o texto não for enviado, o sistema e salva o valor default conforme abaixo:
>
> Texto = Você recebeu o(s) documento(s): \[Nome do documento informado no paramento "nome"] para assinaturas.

#### **usarOrdemAssinatura**

> **Descrição:** Parâmetro obrigatório informando se será usada ou não ordem de assinatura para os signatários.
>
> **Formato:** Bit, 1 = true ou 0 = false
>
> **Requerido:&#x20;**<mark style="color:red;">**Sim**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Quando o parâmetro **usarOrdemAssinatura** for enviado como **false**, sistema desconsidera o valor informado no parâmetro “**ordemAssinatura**” de todos os destinatários com ação de Assinar Online e envia o documento para todos os destinatários considerando como ordem 1.
>
> b- Quando o parâmetro **usarOrdemAssinatura** for enviado como **true**, sistema valida o parâmetro “**ordemAssinatura**” de todos os destinatários com ação de Assinar Online. Ou seja, o parâmetro “**ordemAssinatura**” **dos destinatários** não poderá ser zero ou null.

#### usarPosicaoAssinaturaAutomatica

> **Descrição:** Parâmetro obrigatório para indicar à aplicação se o processo em questão terá a página de assinatura ao final de cada arquivo. Nesta página a aplicação escolhe automaticamente onde cada assinatura será posicionada.
>
> **Formato:** Bit, 1 = true ou 0 = false
>
> **Requerido:&#x20;**<mark style="color:red;">**Sim**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Quando o parâmetro “**usarPosicaoAssinaturaAutomatica**” for **true**, então a aplicação inclui uma página no **final de cada arquivo**, com a posição da assinatura de cada destinatário com ação de Assinar Online, considerando o tipo de pessoa para cada signatário conforme descrito abaixo:
>
> * Para os signatários com o parâmetro **assinarComo** = 1 (Pessoa física), o sistema inclui na página automática a posição da assinatura do tipo **Pessoa Física** (PF).
> * Para os signatários com o parâmetro **assinarComo** = 2 (Pessoa jurídica), o sistema inclui na página automática a posição da assinatura do tipo **Pessoa Jurídica** (PJ).
> * Para os signatários com o parâmetro **assinarComo** = 3 (Pessoa física e jurídica), o sistema inclui na página automática a posição da assinatura para duas assinaturas, uma do tipo **Pessoa Física** (PF) e uma do tipo **Pessoa Jurídica** (PJ).
>
> Quando o parâmetro “**usarPosicaoAssinaturaAutomatica**” for enviado como **true** não é necessário enviar os parâmetros **definirPosicaoAssinaturaManual** (9.7.7). Mas se no JSON for enviado para algum signatário o parâmetro 9.6.7, **a informação será ignorada neste caso**.
>
>
>
> b- Quando o parâmetro **usarPosicaoAssinaturaAutomatica** for enviado como **false**, significa que o posicionamento das assinaturas para cada signatário deverá ser informado manualmente para cada arquivo do processo em questão. Sendo obrigatório enviar os dados do parâmetro **definirPosicaoAssinaturaManual (9.7.7)**
>
>
>
> {% hint style="danger" %}
> <mark style="color:red;">**Importante**</mark><mark style="color:red;">:</mark> No JSON todos os destinatários com ação de assinar online precisam ter o posicionamento da representação visual de forma automática pela aplicação ou o posicionamento para todos devem ser enviados manualmente no JSON. Não pode haver no mesmo processo alguns destinatários com posicionamento automático e outros sem posicionamento automático.
> {% endhint %}

#### destinatários

> **idTipoAcao**
>
> **Descrição:** Parâmetro obrigatório que define a ação do destinatário para com o documento. Atualmente existem duas opções **1 - Assinar Online** ou **2 - Receber uma cópia**.
>
> **Formato:** Tinyint: 1 - Assinar Online ou 2 - Receber uma cópia.
>
> **Requerido:&#x20;**<mark style="color:red;">**Sim**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- É obrigatório informar para o processo de assinaturas, ao menos um destinatário com ação de “**Assinar Online**”.

> **ordemAssinatura**
>
> **Descrição: Parâmetro obrigatório que define a ordem de assinatura do signatário em questão.**
>
> **Formato:** Tinyint
>
> **Requerido:&#x20;**<mark style="color:red;">**Sim, quando parâmetro usarOrdemDeAssinatura = 1 (true) e quando para o destinatário em questão o idTipoAcao = 1 (AssinarOnline).**</mark>
>
> <mark style="color:red;">**Validação:**</mark>
>
> a- Quando o parâmetro “**usarOrdemDeAssinatura**” estiver sendo enviado como **True** = **1** e o destinatário em questão possuir o parâmetro **idTipoAcao** = 1 **(Assinar Online)**, então esta informação é obrigatória .
>
> **Mensagem:** - Quando o parâmetro **usarOrdemDeAssinatura** for igual a true, é obrigatório definir ordem de assinatura para o(s) signatário(s) com ação de Assinar Online.
>
> b- A aplicação não permite mesmo destinatário na mesma ordem de assinatura
>
> **Mensagem:** Existem destinatários duplicados na mesma posição de ordem de assinatura. Verifique a lista de destinatários e configure uma ordem de assinatura diferente para os destinatários duplicados ou remova os repetidos

> **representacaoVisualAssinatura**
>
> **Descrição:** Parâmetro opcional informando qual a representação visual de assinatura será exigida do signatário.
>
> **Formato:** Tinyint: **1 - Padrão, 2 - Desenho, 3 - Imagem**
>
> **Requerido:&#x20;**<mark style="color:blue;">**Não**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- Quando o parâmetro **“representacaoVisualAssinatura” não for enviado** ou **enviado como null**, significa que não será exigido um estilo de assinatura específico.
>
> b- Quando informado valores, o sistema valida, permitindo somente valores iguais a 1, 2 ou 3.
>
> **Mensagem** - O parâmetro **representacaoVisualAssinatura** permite somente valor 1, 2 ou 3.

> **nome**
>
> **Descrição:** Parâmetro obrigatório informando o nome do destinatário que assinará o documento ou receberá uma cópia.
>
> **Formato:** Varchar (150)
>
> **Requerido:&#x20;**<mark style="color:red;">**Sim**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- O sistema valida a obrigatoriedade e o tamanho do nome do signatário.

> **email**
>
> **Descrição:** Parâmetro informando o email onde o destinatário receberá o documento.
>
> **Formato:** Varchar(150)
>
> **Requerido:** <mark style="color:red;">**Email ou Telefone são obrigatórios**</mark>
>
> <mark style="color:orange;">**Validação:**</mark>
>
> a- O sistema valida a **obrigatoriedade** do e-mail ou telefone.
>
> **Mensagem** - O parâmetro **email ou telefone** é obrigatório.
>
> b- Somente é permitido **e-mail válido**.
>
> **Mensagem** - E-mail inválido.
>
> c- Somente **é permitido informar** **e-mail ou telefone.**
>
> Quando o usuário informar os dois campos, o sistema retorna a mensagem:
>
> **Mensagem** - Somente é possível enviar o processo para um e-mail ou telefone. Escolha uma forma de envio.
